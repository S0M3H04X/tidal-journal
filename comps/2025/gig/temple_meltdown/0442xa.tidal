-- setcps(160/60/4)

do
  asap $ connectionMax 8 # speedSequenser 4
  let dm = "rolandtr808"
      slicepat1 = "<[8 .. 15][0 .. 3][4 .. 7][0 .. 7]>"
      slicepat2 = "<0 .. 15>"
  clutchIn 8 1 -- drum
    -- $ gtfo
    -- $ slow 2
    $ qt
    -- $ sometimesBy 0.75 one
    -- $ every 16 (slow 2)
    -- $ every 32 (bitemod 3 6 8)
    $ stack [
      -- loopAt 4
      -- $ chop 4
      slice 16 (slow 2 $ runmod' 16 4 3 "<0 5 _ 7>")
      $ n "<4@2 . 1 2 1>"
      # "umrudmlp"
      # octersubsub 1
      # cut 1
      # silence
      ,swingBy (1/16) 32
      $ n "3*16"
      # s "bshihat"
      |* speed (slow 4 $ rangex 1.2 1.8 saw)
      |* gain (fast 3 $ range 0.6 1 rand)
      ,sometimesBy 0.25 (|* vowel "<a e o>")
      $ every 8 (|+ n " ~ [~ 3] ~ 3")
      $ n "~ ~ 4 ~"
      # s "cp"
      ,struct "<t(5,16) t(3,8)>"
      $ s "kick:5"
    ]
    # orbit 0
    # connectionN 1
  clutchIn 8 2 -- bass
    -- $ gtfo
    $ slow 16
    $ every 8 (gtfo)
    -- $ qt
    -- $ spread ($) [
    --   id,
    --   density 2,
    --   slow 2
    -- ]
    $ chunk 4 (iter 2)
    $ slice 16 (runmod 4 "<16 _ 8 [3 1]>" 4)
    $ loopAt 8
    $ chop 2
    $ n "<[~ 3] 1 2 3>"
    # s "splsbslp"
    -- # lpf (slow 4 $ range 800 4000 isaw)
    # octersubsub 1
    # cut 1
    # orbit 1
    # gain 1.2
    # connectionN 2
  clutchIn 8 3 -- gtr & oth
    -- $ gtfo
    $ qt
    $ whenmod 4 3 (striate 8)
    $ slow 4
    -- -- $ every 4 (jux rev)
    -- $ spread ($) [
    --   rev,
    --   density 2,
    --   slow 2,
    --   id
    -- ]
    -- $ off 0.25 (|* speed "<-1 1 -0.5>")
    -- $ every 8 ((1/8) ~>)
    $ loopAt 4
    $ chop 4
    -- $ slice 32 slicepat2
    -- $ sometimesBy 0.5 (off 0.25 (|+ 12))
    $ stack [
      chop 4
      $ loopAt 4
      $ slice 32 slicepat2
      $ n "<0 .. 7>"
      # s "mglvgtL"
      # pan 1,
      n "<0 .. 7>"
      # s "mglvgtR"
      # pan 0,
      n "<[~ ~][7 .. 0]>"
      # s "mglvotL"
      # pan 1,
      n "<[~ ~][7 .. 0]>"
      # s "mglvotR"
      # pan 0
    ]
    # legato (slow 4 $ rangex 1.5 1.2 isaw)
    # delay 0.05 # size 0.3
    # gain (rangex 1.5 1.2 isaw)
    # orbit 2
    # connectionN 3
  clutchIn 8 4 -- vocal
    -- $ gtfo
    -- $ degradeBy 0.3
    $ slow 2
    $ every 4 (jux rev)
    $ stack [
      loopAt 4
      $ chop 4
      $ slice 16 "<0 .. 7>"
      $ n "<3 ~ 1 ~>"
      # s "plmlvcl"
    ]
    # legato 1
    -- # lpf 1200
    -- |* speed 0.8
    # room 0.3
    -- # gain 1
    # orbit 3
    # connectionN 4
  clutchIn 8 5 -- perc
    -- $ gtfo
    $ qt
    $ slow 2
    $ bitemod 8 5 0
    $ stack [
      struct ("0 0 1 1 0 1 0 0 1 0 0 1")
      $ drumFrom dm "~[cp,sd(3,8)]"
      ,struct ("0 0 0 1 0 0 0 0 1 0 0 1")
      $ drumFrom dm "[~perc]*2"
      ,slice 32 (slow 2 $ runmod' 32 7 3 "<0 10>")
      $ every 3 (degradeBy 0.3)
      $ "bev" # legato 2 # delay 0.05 # delayt 0.1
      # speed 1.3 # room 0.4 # size 0.8
      # gain (slow 4 $ rangex 1 1.2 sine)
    ]
    # pan (range 0 1 sine)
    -- # hpf 1000
    # connectionN 5
  clutchIn 8 6 -- synth
    $ gtfo
    $ qt
    $ every 3 (slow 2)
    -- $ foldEvery [3,5] (linger "<0.5 0.25>")
    -- $ ifp ((== 0). (flip mod 2)) (striate 2) (# squiz 2)
    $ stack [
      loopAt 4
      $ chop 4
      $ note (scale "phrygian" $ runmod 8 "<5 8 12>/4" "0@5g <0 1>")
      # "mohisylp:5"
      # legato 1
      -- # hpf 1200
    ]-- splice effect
    # room 0.2
    # cut 1 # speed 1 # release 0.8 # attack 0.1
    # delay 0.05 # delayt 0.25
    # connectionN 6




hush
